<div class="w3-bar w3-white w3-hide-small w3-display-center">
              <div class="w3-left-align">
              <a href="/" class="w3-bar-item w3-button"><img src="/images/icon_gama_50.png"></a>
              <a href="/wiki/Home" class="w3-bar-item w3-button w3-text-blue w3-hover-blue w3-hover-text-white"><b>DOCUMENTATION</b></a>
              <a href="/wiki/Tutorials" class="w3-bar-item w3-button w3-text-blue w3-hover-blue w3-hover-text-white"><b>TUTORIALS</b></a>
              <a href="/download" class="w3-bar-item w3-button w3-text-blue w3-hover-blue w3-hover-text-white"><b>DOWNLOAD</b></a>
              <a href="/news" class="w3-bar-item w3-button w3-text-blue w3-hover-blue w3-hover-text-white"><b>NEWS</b></a>
              <a href="/contribute" class="w3-bar-item w3-button w3-text-blue w3-hover-blue w3-hover-text-white"><b>CONTRIBUTE</b></a>
              <div class="w3-bar-item w3-right"><input type="text" id="search-box" name="search-box" onkeypress="return checkEntry(event)">
                    <i class="fa fa-search w3-text-blue" aria-hidden="true" onclick="search();"></i>
                    <div class="w3-sidebar w3-bar-block w3-card-2 w3-animate-right w3-quarter " style="display:none;right:0;opacity: 0.9;" id="rightMenu">
                      <i onclick="closeRightMenu()" class="fa fa-times w3-bar-item w3-large"></i>
                      <div id="search-results" ></div>
                    </div>
                    
              </div>
            
            </div>
</div>
<script>
function checkEntry(e){
    if(e.keyCode==13)
    {
        search();
    }
};
var json_operator = (function () {
      var json_operator = null;
      $.ajax({
         'async': false,
         'global': false,
         'url': "/index_operator.json",
         'dataType': "json",
         'success': function (data) {
             json_operator = data;
         }
     });
     return json_operator;
 })(); 
var json = (function () {
      var json = null;
      $.ajax({
         'async': false,
         'global': false,
         'url': "/index.json",
         'dataType': "json",
         'success': function (data) {
             json = data;
         }
     });
     return json;
 })(); 
 var store = {
     {% for post in site.pages %}
       "{{ post.url }}": {
         "title": "{{ post.title | xml_escape }}",
         "url": "{{ post.url | xml_escape }}"
       }
        {% unless forloop.last %},{% endunless %}
      {% endfor %}
    };
var idx = lunr.Index.load(json);
var searchResults = document.getElementById('search-results');
function displaySearchResults(results, store) {

    if (results.length) { // Are there any results?
      var appendString = '';

      for (var i = 0; i < results.length; i++) {  // Iterate over the results
        var item = store[results[i].ref];
        if(!item)
        {
            var tmp_ref = "/"+results[i].ref.substr(0,results[i].ref.lastIndexOf('.'))+".html";
            item = store[tmp_ref];
        }
        if(item)
        {
            appendString += '<li class="w3-margin-left"><a href="'+item.url+'" class="w3-text-blue" style="text-decoration: none;">' + item.title + '</a></li>';
        }
      }

      searchResults.innerHTML = searchResults.innerHTML = searchResults.innerHTML+appendString+"<br/>";
    } else {
      searchResults.innerHTML = searchResults.innerHTML = searchResults.innerHTML+'<br/>No results found';
    }
  }
  function displaySearchResultsOperators(resultsOperator) {

    var appendString = '';

    if (resultsOperator.length) { // Are there any results?
      for (var i = 0; i < resultsOperator.length; i++) {  // Iterate over the results
        appendString += '<li class="w3-margin-left"><a href="/wiki/Operators#'+resultsOperator[i].ref+'" class="w3-text-blue" style="text-decoration: none;"> OPERATOR : ' + resultsOperator[i].ref + '</a></li>';
      }
    } 
    searchResults.innerHTML = searchResults.innerHTML+"OPERATORS    "+appendString+"---------------------------- <br/>";
  }
function search() {
  var searchTerm = document.getElementById("search-box").value;
  searchResults.innerHTML="";
  if (searchTerm) {
     // Initalize lunr with the fields it will be searching on. I've given title
    // a boost of 10 to indicate matches on this field are more important.
    var idx = lunr.Index.load(json);
    console.log("FINISHING INDEX");
    var idx_operator = lunr.Index.load(json_operator)
    console.log("FINISHING INDEX OPERATOR");
    var resultsOperator = idx_operator.search(searchTerm); // Get lunr to perform a search
    console.log("FINISHING SEARCH OPERATOR");
     displaySearchResultsOperators(resultsOperator); // We'll write this in the next section
     var results = idx.search(searchTerm); // Get lunr to perform a search
    console.log("FINISHING SEARCH");
     displaySearchResults(results,store); // We'll write this in the next section
     
    openRightMenu();
  }
  
  return false;
}
function openRightMenu() {
    document.getElementById("rightMenu").style.display = "block";
}
function closeRightMenu() {
    document.getElementById("rightMenu").style.display = "none";
}
</script>
