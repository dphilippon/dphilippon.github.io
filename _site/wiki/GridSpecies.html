
    <!doctype html><html lang="en"><head><meta charset="utf-8"><title>Grid Species</title></head>
    <body>
    <link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/w3.css">
<link rel="stylesheet" href="/css/font-awesome.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script src="//connect.facebook.net/en_US/all.js"></script>
<script src="/js/linkify.min.js"></script>
<script src="/js/linkify-jquery.min.js"></script>
<script src="https://unpkg.com/lunr/lunr.js"></script>
    <div class="w3-bar w3-white w3-hide-small">
      <a href="/" class="w3-bar-item w3-button"><img src="/images/icon_gama_50.png"></a>
      <a href="/wiki/Home" class="w3-bar-item w3-button w3-text-blue">Documentation</a>
      <a href="/wiki/Tutorials" class="w3-bar-item w3-button w3-text-blue">Tutorials</a>
      <a href="/download" class="w3-bar-item w3-button w3-text-blue">Download</a>
      <a href="/news" class="w3-bar-item w3-button w3-text-blue">News</a>
      <a href="/contribute" class="w3-bar-item w3-button w3-text-blue">Contribute</a>
    </div>

    <div class="w3-row-padding w3-padding-64 w3-container">
        <div>
             <div class="w3-quarter" style="width:260px">
		<nav class="w3-bar-block w3-collapse w3-large w3-theme-l5 w3-animate-left w3-small"  style="z-index:3;margin-left:10px" id="mySidebar">
                    <div class="w3-medium w3-text-blue" style="font-weight:bold"><div>
<a href='/wiki/Tutorials'>Tutorials
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/LearnGAMLStepByStep'>Learn GAML Step by Step
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/Introduction'>Introduction
</a><br/>
<a href='/wiki/StartWithGAML'>Start with GAML
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/ModelOrganization'>Organization of a model
</a><br/>
<a href='/wiki/BasicProgrammingConceptsInGAML'>Basic programming concepts in GAML
</a><br/>
    </div>
<a href='/wiki/ManipulateBasicSpecies'>Manipulate basic species
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/GlobalSpecies'>The global species
</a><br/>
<a href='/wiki/RegularSpecies'>Regular species
</a><br/>
<a href='/wiki/DefiningActionsAndBehaviors'>Defining actions and behaviors
</a><br/>
<a href='/wiki/InteractionBetweenAgents'>Interaction between agents
</a><br/>
<a href='/wiki/AttachingSkills'>Attaching Skills
</a><br/>
<a href='/wiki/Inheritance'>Inheritance
</a><br/>
    </div>
<a href='/wiki/DefiningAdvancedSpecies'>Defining advanced species
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/GridSpecies'>Grid Species
</a><br/>
<a href='/wiki/GraphSpecies'>Graph Species
</a><br/>
<a href='/wiki/MirrorSpecies'>Mirror species
</a><br/>
<a href='/wiki/MultiLevelArchitecture'>Multi-level architecture
</a><br/>
    </div>
<a href='/wiki/DefiningGUIExperiment'>Defining GUI Experiment
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/DefiningParameters'>Defining Parameters
</a><br/>
<a href='/wiki/DefiningDisplaysGeneralities'>Defining displays (Generalities)
</a><br/>
<a href='/wiki/DefiningCharts'>Defining Charts
</a><br/>
<a href='/wiki/Defining3DDisplays'>Defining 3D Displays
</a><br/>
<a href='/wiki/DefiningMonitorsAndInspectors'>Defining monitors and inspectors
</a><br/>
<a href='/wiki/DefiningExportFiles'>Defining export files
</a><br/>
<a href='/wiki/DefiningUserInteraction'>Defining user interaction
</a><br/>
    </div>
<a href='/wiki/ExploringModels'>Exploring Models
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/RunSeveralSimulations'>Run Several Simulations
</a><br/>
<a href='/wiki/BatchExperiments'>Defining Batch Experiments
</a><br/>
<a href='/wiki/ExplorationMethods'>Exploration Methods
</a><br/>
    </div>
<a href='/wiki/OptimizingModels'>Optimizing Models
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/RuntimeConcepts'>Runtime Concepts
</a><br/>
OptimizingModelsSelection
    </div>
<a href='/wiki/MultiParadigmModeling'>Multi-Paradigm Modeling
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/ControlArchitecture'>Control Architectures
</a><br/>
<a href='/wiki/Equations'>Using Equations
</a><br/>
    </div>
    </div>
<a href='/wiki/Recipes'>Recipes
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/ManipulateOSMDatas'>Manipulate OSM Datas
</a><br/>
<a href='/wiki/Diffusion'>Implementing diffusion
</a><br/>
<a href='/wiki/UsingDatabase'>Using Database Access
</a><br/>
<a href='/wiki/CallingR'>Calling R
</a><br/>
<a href='/wiki/UsingFIPAACL'>Using FIPA ACL
</a><br/>
<a href='/wiki/GamAnalyzer'>Using GAMAnalyzer
</a><br/>
<a href='/wiki/UsingBDI'>Using BDI
</a><br/>
<a href='/wiki/UsingDrivingSkill'>Advanced Driving Skill
</a><br/>
<a href='/wiki/ManipulateDates'>Manipulate Dates
</a><br/>
<a href='/wiki/ManipulateLight'>Implementing light
</a><br/>
<a href='/wiki/Comodel'>Using Comodel
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
—Headlessmodefordummies
    </div>
    </div>
    </div>
<a href='/wiki/Tutorials'>Tutorials
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/LuneraysFlu'>Luneray's flu
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/LuneraysFlu_step1'>1. Creation of a first basic disease spreading model
</a><br/>
<a href='/wiki/LuneraysFlu_step2'>2. Definition of monitors and chart outputs
</a><br/>
<a href='/wiki/LuneraysFlu_step3'>3. Importation of GIS data
</a><br/>
<a href='/wiki/LuneraysFlu_step4'>4. Use of a graph to constraint the movements of people]
</a><br/>
<a href='/wiki/LuneraysFlu_step5'>5. Definition of 3D displays
</a><br/>
    </div>
<a href='/wiki/IncrementalModel'>Incremental Model
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/IncrementalModel_step1'>1. Simple SI Model
</a><br/>
<a href='/wiki/IncrementalModel_step2'>2. Charts
</a><br/>
<a href='/wiki/IncrementalModel_step3'>3. Integration of GIS Data
</a><br/>
<a href='/wiki/IncrementalModel_step4'>4. Movement on Graph
</a><br/>
<a href='/wiki/IncrementalModel_step5'>5. Visualizing in 3D
</a><br/>
<a href='/wiki/IncrementalModel_step6'>6. Multi-Level
</a><br/>
<a href='/wiki/IncrementalModel_step7'>7. Differential Equations
</a><br/>
    </div>
<a href='/wiki/PredatorPrey'>Predator Prey
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/PredatorPrey_step1'>1. Basic Model
</a><br/>
<a href='/wiki/PredatorPrey_step2'>2. Vegetation Dynamic
</a><br/>
<a href='/wiki/PredatorPrey_step3'>3. Prey Agent Behavior
</a><br/>
<a href='/wiki/PredatorPrey_step4'>4. Inspectors and Monitors
</a><br/>
<a href='/wiki/PredatorPrey_step5'>5. Predator Agent
</a><br/>
<a href='/wiki/PredatorPrey_step6'>6. Breeding
</a><br/>
<a href='/wiki/PredatorPrey_step7'>7. Agent Aspect
</a><br/>
<a href='/wiki/PredatorPrey_step8'>8. Complex Behavior
</a><br/>
<a href='/wiki/PredatorPrey_step9'>9. Stopping condition
</a><br/>
<a href='/wiki/PredatorPrey_step10'>10. Charts
</a><br/>
<a href='/wiki/PredatorPrey_step11'>11. Writing Files
</a><br/>
<a href='/wiki/PredatorPrey_step12'>12. Image loading
</a><br/>
    </div>
<a href='/wiki/RoadTrafficModel'>Road Traffic
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/RoadTrafficModel_step1'>1. Loading of GIS Data
</a><br/>
<a href='/wiki/RoadTrafficModel_step2'>2. People Agents
</a><br/>
<a href='/wiki/RoadTrafficModel_step3'>3. Movement of People
</a><br/>
<a href='/wiki/RoadTrafficModel_step4'>4. Weight for Road Network
</a><br/>
<a href='/wiki/RoadTrafficModel_step5'>5. Dynamic weights
</a><br/>
<a href='/wiki/RoadTrafficModel_step6'>6. Charts
</a><br/>
<a href='/wiki/RoadTrafficModel_step7'>7. Automatic Road Repair
</a><br/>
    </div>
<a href='/wiki/ThreeD'>3D Tutorial
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/ThreeD_step1'>1. Basic Model
</a><br/>
<a href='/wiki/ThreeD_step2'>2. Moving Cells
</a><br/>
<a href='/wiki/ThreeD_step3'>3. Connections
</a><br/>
    </div>
    </div>
    </div>
<a href='/wiki/References'>References
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/PlatformDocumentation'>Platform
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/InstallationAndLaunching'>Installation and Launching
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/Installation'>Installation
</a><br/>
<a href='/wiki/Launching'>Launching GAMA
</a><br/>
<a href='/wiki/Headless'>Headless Mode
</a><br/>
<a href='/wiki/Updating'>Updating GAMA
</a><br/>
<a href='/wiki/InstallingPlugins'>Installing Plugins
</a><br/>
<a href='/wiki/Troubleshooting'>Troubleshooting
</a><br/>
    </div>
<a href='/wiki/WorkspaceProjectsAndModels'>Workspace, Projects and Models
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/NavigatingWorkspace'>Navigating in the Workspace
</a><br/>
<a href='/wiki/ChangingWorkspace'>Changing Workspace
</a><br/>
<a href='/wiki/ImportingModels'>Importing Models
</a><br/>
    </div>
<a href='/wiki/EditingModels'>Editing models
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/GamlEditorGeneralities'>The GAML Editor - Generalities
</a><br/>
<a href='/wiki/GamlEditorToolbar'>The GAML Editor Toolbar
</a><br/>
<a href='/wiki/ValidationOfModels'>Validation of Models
</a><br/>
    </div>
<a href='/wiki/RunningExperiments'>Running Experiments
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/LaunchingExperiments'>Launching Experiments from the User Interface
</a><br/>
<a href='/wiki/ExperimentsUserInterface'>Experiments User Interface
</a><br/>
<a href='/wiki/MenusAndCommands'>Menus and Commands
</a><br/>
<a href='/wiki/ParametersView'>Parameters View
</a><br/>
<a href='/wiki/InspectorsAndMonitors'>Inspectors and monitors
</a><br/>
<a href='/wiki/Displays'>Displays
</a><br/>
<a href='/wiki/BatchSpecific'>Batch Specific UI
</a><br/>
<a href='/wiki/ErrorsView'>Errors View
</a><br/>
    </div>
<a href='/wiki/Preferences'>Preferences
</a><br/>
    </div>
<a href='/wiki/GamlReferences'>Gaml Reference
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/BuiltInSpecies'>Built-in Species
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/AgentBuiltIn'>The 'agent' built-in species (Under Construction)
</a><br/>
<a href='/wiki/ModelBuiltIn'>The 'model' built-in species (Under Construction)
</a><br/>
<a href='/wiki/ExperimentBuiltIn'>The 'experiment' built-in species (Under Construction)
</a><br/>
    </div>
<a href='/wiki/BuiltInSkills'>Built-in Skills
</a><br/>
<a href='/wiki/BuiltInArchitectures'>Built-in Architectures
</a><br/>
<a href='/wiki/Statements'>Statements
</a><br/>
<a href='/wiki/DataTypes'>Types
</a><br/>
<a href='/wiki/FileTypes'>File Types
</a><br/>
<a href='/wiki/Expressions'>Expressions
</a><br/>
      <div id='sub' class=' w3-padding-small w3-bar-block w3-small'>
<a href='/wiki/Literals'>Literals
</a><br/>
<a href='/wiki/UnitsAndConstants'>Units and constants
</a><br/>
<a href='/wiki/PseudoVariables'>Pseudo-variables
</a><br/>
<a href='/wiki/VariablesAndAttributes'>Variables and Attributes
</a><br/>
<a href='/wiki/Operators'>Operators 
</a><br/>
    </div>
    </div>
    </div>
Community
</div></div></nav></div>
    <div class="w3-threequarter">
        <h1 id="grid-species">Grid Species</h1>

<p>A grid is a particular species of agents. Indeed, a grid is a set of agents that share a grid topology (until now, we only saw species with continuous topology). As other agents, a grid species can have attributes, attributes, behaviors, aspects
However, contrary to regular species, grid agents are created automatically at the beginning of the simulation. It is thus not necessary to use the create statement to create them.
Moreover, in addition to classic built-in variables, grid a provided with a set of additional built-in variables.</p>

<h2 id="index">Index</h2>

<ul>
  <li><a href="#declaration">Declaration</a></li>
  <li><a href="#built-in-attributes">Built-in attributes</a></li>
  <li><a href="#access-to-cells">Access to cells</a></li>
  <li><a href="#display-grid">Display grid</a></li>
  <li><a href="#grid-with-matrix">Grid with matrix</a></li>
  <li><a href="#example">Example</a></li>
</ul>

<h2 id="declaration">Declaration</h2>

<p>Instead of using the <code class="highlighter-rouge">species</code> keyword, use the keyword <code class="highlighter-rouge">grid</code> to declare a grid species. The grid species has exactly the same facets of the regular species, plus some others.
To declare a grid, you have to specify the number of columns and rows first. You can do it two different ways:</p>

<p>Using the two facets <code class="highlighter-rouge">width:</code> and <code class="highlighter-rouge">height:</code> to fix the number of cells (the size of each cells will be determined thanks to the environment dimension).</p>

<div class="highlighter-rouge"><pre class="highlight"><code>grid my_grid width:8 height:10 {
// my_grid has 8 columns and 10 rows
}
</code></pre>
</div>

<p>Using the two facets <code class="highlighter-rouge">cell_width:</code> and <code class="highlighter-rouge">cell_height:</code> to fix the size of each cells (the number cells will be determined thanks to the environment dimension).</p>

<div class="highlighter-rouge"><pre class="highlight"><code>grid my_grid cell_width:3 cell_height:2 {
// my_grid has cells with dimension 3m width by 2m height
}
</code></pre>
</div>

<p>By default, a grid is composed by 100 rows and 100 columns.</p>

<p>Another facet exists for grid only, very useful. It is the <code class="highlighter-rouge">neighbors</code> facet, used to determine how many neighbors has each cell. You can choose among 3 values: 4 (Von Neumann), 6 (hexagon) or 8 (Moore).</p>

<p><img src="resources/images/definingAdvancedSpecies/grid_neighbors.png" alt="images/grid_neighbors.png" /></p>

<p>A grid can also be provided with specific facets that allows to optimize the computation time and the memory space, such as <code class="highlighter-rouge">use_regular_agents</code>, <code class="highlighter-rouge">use_indivitual_shapes</code> and <code class="highlighter-rouge">use_neighbours_cache</code>. Please refer to the GAML Reference for more explanation about those particular facets.</p>

<h2 id="built-in-attributes">Built-in attributes</h2>

<h3 id="grid_x">grid_x</h3>
<p>This variable stores the column index of a cell.</p>
<div class="highlighter-rouge"><pre class="highlight"><code>   grid cell width: 10 height: 10 neighbors: 4 {
        init {
             write "my column index is:" + grid_x;
        }
   }
</code></pre>
</div>

<h3 id="grid_y">grid_y</h3>
<p>This variable stores the row index of a cell.</p>
<div class="highlighter-rouge"><pre class="highlight"><code>   grid cell width: 10 height: 10 neighbors: 4 {
        init {
             write "my row index is:" + grid_y;
        }
   }
</code></pre>
</div>
<h3 id="agents">agents</h3>

<p>return the set of agents located inside the cell. Note the use of this variable is deprecated.
It is preferable to use the <code class="highlighter-rouge">inside</code> operator:
<a href="# (keyword|concept_load_file)">//</a>: # (keyword|operator_inside)</p>

<div class="highlighter-rouge"><pre class="highlight"><code> grid cell width: 10 height: 10 neighbors: 4 { 
        list&lt;bug&gt; bugs_inside -&gt; {bug inside self};
   }
</code></pre>
</div>

<h3 id="color">color</h3>
<p>The <strong>color</strong> built-in variable is used by the optimized grid display. Indeed, it is possible to use for grid agents an optimized aspect by using in a display the <strong>grid</strong> keyword. In this case, the grid will be displayed using the color defined by the <strong>color</strong> variable. The border of the cells can be displayed with a specific color by using the <strong>lines</strong> facet.</p>

<p>Here an example of the display of a grid species named <strong>cell</strong> with black border.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>experiment main_xp type: gui{
	output {
		display map {
			grid cell lines: rgb("black") ;
		}
	}
}
</code></pre>
</div>

<h3 id="neighbors">neighbors</h3>
<p>The <strong>neighbors</strong> built-in variable returns the list of cells at a distance of 1.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>grid my_grid {
  reflex writeNeighbors {
    write neighbors;
  }
}
</code></pre>
</div>

<h3 id="grid_value">grid_value</h3>
<p>The <strong>grid_value</strong> built-in variable is used when initializing a grid from grid file (see later). It is also used for the 3D representation of DEM.</p>

<h2 id="access-to-a-cell">Access to a cell</h2>

<p>there are several ways to access to a specific cell:</p>

<ul>
  <li>by a location: by casting a location to a cell (the unity (<code class="highlighter-rouge">#m</code>, <code class="highlighter-rouge">#cm</code>, etc…) is defined when you choose your environment size, in the <a href="GlobalSpecies">global species</a>.</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>   global {
         init {
             write "cell at {57.5, 45} :" + cell({57.5, 45});
         }
   }

   grid cell width: 10 height: 10 neighbors: 4 {
   }
</code></pre>
</div>

<ul>
  <li>by the row and column indexes: like matrix, it is possible to directly access to a cell from its indexes</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>   global {
         init {
             write "cell [5,8] :" + cell[5,8];
         }
   }
   grid cell width: 10 height: 10 neighbors: 4 {
   }
</code></pre>
</div>

<p>The operator <code class="highlighter-rouge">grid_at</code> also exists to get a particular cell. You just have to specify the index of the cell you want (in x and y):</p>

<div class="highlighter-rouge"><pre class="highlight"><code>   global {
         init {
             agent cellAgent &lt;- cell grid_at {5,8};
             write "cell [5,8] :" + cellAgent;
         }
   }
   grid cell width: 10 height: 10 neighbors: 4 {
   }
</code></pre>
</div>

<h2 id="display-grid">Display Grid</h2>

<p>You can easily display your grid in your experiment as followed :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>experiment MyExperiment type: gui {
    output {
        display MyDisplay type: opengl {
            grid MyGrid;
        }
    }
}
</code></pre>
</div>

<p>The grid will be displayed, using the color you defined for each cell (with the “color” built-in attribute). You can also show border of each cell by using the facet “line:” and choosing a rgb color:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>grid MyGrid line:#black;
</code></pre>
</div>

<p>An other way to display a grid will be to define an aspect in your grid agent (the same way as for a <a href="RegularSpecies">regular species</a>), and define your grid as a regular species then in your experiment, choosing your aspect :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>grid MyGrid {
    aspect firstAspect {
        draw square(1);
    }
    aspect secondAspect {
        draw circle(1);
    }
}

experiment MyExperiment type: gui {
    output {
        display MyDisplay type: opengl {
            species MyGrid aspect:firstAspect;
        }
    }
}
</code></pre>
</div>

<p>Beware : don’t use this second display when you have large grids : it’s much slower.</p>

<h2 id="grid-from-a-matrix">Grid from a matrix</h2>

<p>An easy way to load some values in a grid is to use matrix data. A <code class="highlighter-rouge">matrix</code> is a type of container (we invite you to learn some more about this useful type <a href="DataTypes#matrix">here</a>). Once you have declared your matrix, you can set the values of your cells using the <code class="highlighter-rouge">ask</code> statement :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>global {
  init {
    matrix data &lt;- matrix([[0,1,1],[1,2,0]]);
    ask cell {
      grid_value &lt;- float(data[grid_x, grid_y]);
    } 
  }
}
</code></pre>
</div>

<p>Declaring larger matrix in GAML can be boring as you can imagine. You can load your matrix directly from a csv file with the operator <code class="highlighter-rouge">matrix</code> (used for the contruction of the matrix).</p>

<div class="highlighter-rouge"><pre class="highlight"><code>file my_file &lt;- csv_file("path/file.csv","separator");
matrix my_matrix &lt;- matrix(my_file);
</code></pre>
</div>

<p>You can try to read the following csv :</p>
<div class="highlighter-rouge"><pre class="highlight"><code>0,0,0,0,0,0,0,0,0,0,0
0,0,0,1,1,1,1,1,0,0,0
0,0,1,1,0,0,0,1,1,0,0
0,1,1,0,0,0,0,0,0,0,0
0,1,1,0,0,1,1,1,1,0,0
0,0,1,1,0,0,1,1,1,0,0
0,0,0,1,1,1,1,0,1,0,0
0,0,0,0,0,0,0,0,0,0,0
</code></pre>
</div>

<p>With the following model :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>model import_csv

global {
  file my_csv_file &lt;- csv_file("../includes/test.csv",",");
  init {
    matrix data &lt;- matrix(my_csv_file);
    ask my_gama_grid {
      grid_value &lt;- float(data[grid_x,grid_y]);
      write data[grid_x,grid_y];
    }
  }
}

grid my_gama_grid width: 11 height: 8 {
  reflex update_color {
    write grid_value;
    color &lt;- (grid_value = 1) ? #blue : #white;
  }
}

experiment main type: gui{
  output {
    display display_grid {
      grid my_gama_grid;
    }
  }
}
</code></pre>
</div>

<p>For more complicated models, you can read some other files, such as ASCII files (asc), DEM files…</p>

<table>
  <tbody>
    <tr>
      <td><a href="# (keyword|concept_load_file)">//</a>: # (endConcept</td>
      <td>grid)</td>
    </tr>
  </tbody>
</table>

<h2 id="example">Example</h2>

<p>To practice a bit those notions, we will build a quick model. A “regular” species will move randomly on the environment. A grid is displayed, and its cells becomes red when an instance of the regular species is waking inside this cell, and yellow when the regular agent is in the surrounding of this cell. If no regular agent is on the surrounding, the cell turns green.</p>

<p><img src="resources/images/definingAdvancedSpecies/my_grid_model.png" alt="images/my_grid_model.png" /></p>

<p>Here is an example of implementation:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>model my_grid_model

global{
	float max_range &lt;- 5.0;
	int number_of_agents &lt;- 5;
	init {
		create my_species number:number_of_agents;
	}
	reflex update {
		ask my_species {
			do wander amplitude:180;	
			ask my_grid at_distance(max_range)
			{
				if(self overlaps myself)
				{
					self.color_value &lt;- 2;
				}
				else if (self.color_value != 2)
				{
					self.color_value &lt;- 1;
				}
			}
		}
		ask my_grid {
			do update_color;
		}	
	}
}

species my_species skills:[moving] {
	float speed &lt;- 2.0;
	aspect default {
		draw circle(1) color:#blue;
	}
}

grid my_grid width:30 height:30 {
	int color_value &lt;- 0;
	action update_color {
		if (color_value = 0) {
			color &lt;- #green;
		}
		else if (color_value = 1) {
			color &lt;- #yellow;
		}
		else if (color_value = 2) {
			color &lt;- #red;
		}
		color_value &lt;- 0;
	}
}

experiment MyExperiment type: gui {
    output {
        display MyDisplay type: java2D {
            grid my_grid lines:#black;
            species my_species aspect:default; 
        }
    }
}
</code></pre>
</div>

    </div>
    </div>
    </div>
    </body></html>
